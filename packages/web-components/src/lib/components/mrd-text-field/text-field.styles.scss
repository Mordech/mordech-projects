@use '@mordech/tokens/css/reset.css';
@use '../../styles/utils' as *;

:host {
  display: flex;
  flex-direction: column;
  align-items: stretch;
  gap: var(--mrd-space-50);
}

.placeholder-container {
  display: inline-flex;
  justify-content: start;
  opacity: 0.38;
  pointer-events: none;
  position: absolute;
  inset: 0;
  padding: var(--mrd-input-padding, var(--mrd-space-300));
  user-select: none;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  gap: var(--mrd-space-50);

  .placeholder {
    display: flex;
    flex: 1;
  }
}

.label {
  display: inline-flex;
  color: var(--mrd-color-background-on-base);
  gap: var(--mrd-space-50);
  font-size: var(--mrd-input-font-size, var(--mrd-font-size-1));
  line-height: var(--mrd-line-height-1);

  .asterisk {
    color: var(--mrd-color-error-base);
  }
}

.supporting-text {
  display: flex;
  gap: var(--mrd-space-100);
  align-items: center;
  font-size: var(--mrd-input-supporting-font-size, var(--mrd-font-size-0));
  color: var(--mrd-color-background-on-base-variant);

  &[data-error='true'] {
    color: var(--mrd-color-error-base);
  }
}

.input-container {
  @include interaction-layer;

  position: relative;
  display: flex;
  overflow: hidden;
  justify-content: stretch;
  align-items: center;
  border-radius: var(--mrd-input-border-radius, var(--mrd-border-radius-200));
  box-shadow: 0 0 0 1px var(--mrd-input-border-color, var(--mrd-color-outline))
    inset;
  background-color: var(--mrd-color-background);
  color: var(--mrd-color-background-on-base);
  font-size: var(--mrd-input-font-size, var(--mrd-font-size-1));
  line-height: var(--mrd-line-height-1);
  padding: var(--mrd-input-padding, var(--mrd-space-300));
  transition: var(--mrd-transition-default), input {
    overflow: hidden;
    display: flex;
    flex: 1;
    text-overflow: clip;
    width: 100%;
  }

  &:focus-within {
    --mrd-input-border-color: var(--mrd-color-primary-base);
    --mrd-interaction-opacity: 0;
  }

  &:has(input:disabled) {
    --mrd-interaction-opacity: 0;

    opacity: var(--mrd-opacity-disabled);
    cursor: not-allowed;
  }

  &:has(input:not(:placeholder-shown)) {
    .placeholder-container {
      display: none;
    }
  }

  &[data-error='true'] {
    --mrd-input-border-color: var(--mrd-color-error-base);
  }

  input {
    display: flex;
    flex: 1;

    &::placeholder {
      color: transparent;
    }
  }
}

[data-size='compact'] {
  --mrd-input-padding: var(--mrd-space-200);
  --mrd-input-font-size: var(--mrd-font-size-0);
}

[data-size='tiny'] {
  --mrd-input-padding: var(--mrd-space-100) var(--mrd-space-200);
  --mrd-input-font-size: var(--mrd-font-size-0);
}

[data-radius='round'] {
  --mrd-input-border-radius: var(--mrd-border-radius-400);
}

[data-radius='round'][data-size='compact'] {
  --mrd-input-border-radius: var(--mrd-border-radius-300);
}

[data-radius='round'][data-size='tiny'] {
  --mrd-input-border-radius: var(--mrd-border-radius-200);
}

[data-radius='pill'] {
  --mrd-input-border-radius: var(--mrd-border-radius-round);
}

::slotted(svg) {
  height: 1lh;
  fill: currentcolor;
}
